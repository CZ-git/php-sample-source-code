(function(e,t){function i(e){return""===o?e:(e=e.charAt(0).toUpperCase()+e.substr(1),o+e)}var n=Math,a=t.createElement("div").style,o=function(){for(var e,t="t,webkitT,MozT,msT,OT".split(","),i=0,n=t.length;n>i;i++)if(e=t[i]+"ransform",e in a)return t[i].substr(0,t[i].length-1);return!1}(),r=o?"-"+o.toLowerCase()+"-":"",s=i("transform"),l=i("transitionProperty"),c=i("transitionDuration"),u=i("transformOrigin"),d=i("transitionTimingFunction"),h=i("transitionDelay"),p=/android/gi.test(navigator.appVersion),f=/iphone|ipad/gi.test(navigator.appVersion),m=/hp-tablet/gi.test(navigator.appVersion),g=i("perspective")in a,v="ontouchstart"in e&&!m,y=!!o,b=i("transition")in a,w="onorientationchange"in e?"orientationchange":"resize",_=v?"touchstart":"mousedown",x=v?"touchmove":"mousemove",C=v?"touchend":"mouseup",k=v?"touchcancel":"mouseup",T="Moz"==o?"DOMMouseScroll":"mousewheel",S=function(){if(o===!1)return!1;var e={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"};return e[o]}(),$=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),E=function(){return e.cancelRequestAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout}(),I=g?" translateZ(0)":"",D=function(i,n){var a,o=this;o.wrapper="object"==typeof i?i:t.getElementById(i),o.wrapper.style.overflow="hidden",o.scroller=o.wrapper.children[0],o.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:p,hideScrollbar:f,fadeScrollbar:f&&g,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(a in n)o.options[a]=n[a];o.x=o.options.x,o.y=o.options.y,o.options.useTransform=y&&o.options.useTransform,o.options.hScrollbar=o.options.hScroll&&o.options.hScrollbar,o.options.vScrollbar=o.options.vScroll&&o.options.vScrollbar,o.options.zoom=o.options.useTransform&&o.options.zoom,o.options.useTransition=b&&o.options.useTransition,o.options.zoom&&p&&(I=""),o.scroller.style[l]=o.options.useTransform?r+"transform":"top left",o.scroller.style[c]="0",o.scroller.style[u]="0 0",o.options.useTransition&&(o.scroller.style[d]="cubic-bezier(0.33,0.66,0.66,1)"),o.options.useTransform?o.scroller.style[s]="translate("+o.x+"px,"+o.y+"px)"+I:o.scroller.style.cssText+=";position:absolute;top:"+o.y+"px;left:"+o.x+"px",o.options.useTransition&&(o.options.fixedScrollbar=!0),o.refresh(),o._bind(w,e),o._bind(_),v||(o._bind("mouseout",o.wrapper),"none"!=o.options.wheelAction&&o._bind(T)),o.options.checkDOMChanges&&(o.checkDOMTime=setInterval(function(){o._checkDOMChanges()},500))};D.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case _:if(!v&&0!==e.button)return;t._start(e);break;case x:t._move(e);break;case C:case k:t._end(e);break;case w:t._resize();break;case T:t._wheel(e);break;case"mouseout":t._mouseout(e);break;case S:t._transitionEnd(e)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(e){var i,a=this;return a[e+"Scrollbar"]?(a[e+"ScrollbarWrapper"]||(i=t.createElement("div"),a.options.scrollbarClass?i.className=a.options.scrollbarClass+e.toUpperCase():i.style.cssText="position:absolute;z-index:100;"+("h"==e?"height:7px;bottom:1px;left:2px;right:"+(a.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(a.hScrollbar?"7":"2")+"px;top:2px;right:1px"),i.style.cssText+=";pointer-events:none;"+r+"transition-property:opacity;"+r+"transition-duration:"+(a.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(a.options.hideScrollbar?"0":"1"),a.wrapper.appendChild(i),a[e+"ScrollbarWrapper"]=i,i=t.createElement("div"),a.options.scrollbarClass||(i.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+r+"background-clip:padding-box;"+r+"box-sizing:border-box;"+("h"==e?"height:100%":"width:100%")+";"+r+"border-radius:3px;border-radius:3px"),i.style.cssText+=";pointer-events:none;"+r+"transition-property:"+r+"transform;"+r+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+r+"transition-duration:0;"+r+"transform: translate(0,0)"+I,a.options.useTransition&&(i.style.cssText+=";"+r+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),a[e+"ScrollbarWrapper"].appendChild(i),a[e+"ScrollbarIndicator"]=i),"h"==e?(a.hScrollbarSize=a.hScrollbarWrapper.clientWidth,a.hScrollbarIndicatorSize=n.max(n.round(a.hScrollbarSize*a.hScrollbarSize/a.scrollerW),8),a.hScrollbarIndicator.style.width=a.hScrollbarIndicatorSize+"px",a.hScrollbarMaxScroll=a.hScrollbarSize-a.hScrollbarIndicatorSize,a.hScrollbarProp=a.hScrollbarMaxScroll/a.maxScrollX):(a.vScrollbarSize=a.vScrollbarWrapper.clientHeight,a.vScrollbarIndicatorSize=n.max(n.round(a.vScrollbarSize*a.vScrollbarSize/a.scrollerH),8),a.vScrollbarIndicator.style.height=a.vScrollbarIndicatorSize+"px",a.vScrollbarMaxScroll=a.vScrollbarSize-a.vScrollbarIndicatorSize,a.vScrollbarProp=a.vScrollbarMaxScroll/a.maxScrollY),a._scrollbarPos(e,!0),void 0):(a[e+"ScrollbarWrapper"]&&(y&&(a[e+"ScrollbarIndicator"].style[s]=""),a[e+"ScrollbarWrapper"].parentNode.removeChild(a[e+"ScrollbarWrapper"]),a[e+"ScrollbarWrapper"]=null,a[e+"ScrollbarIndicator"]=null),void 0)},_resize:function(){var e=this;setTimeout(function(){e.refresh()},p?200:0)},_pos:function(e,t){this.zoomed||(e=this.hScroll?e:0,t=this.vScroll?t:0,this.options.useTransform?this.scroller.style[s]="translate("+e+"px,"+t+"px) scale("+this.scale+")"+I:(e=n.round(e),t=n.round(t),this.scroller.style.left=e+"px",this.scroller.style.top=t+"px"),this.x=e,this.y=t,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(e,t){var i,a=this,o="h"==e?a.x:a.y;a[e+"Scrollbar"]&&(o=a[e+"ScrollbarProp"]*o,0>o?(a.options.fixedScrollbar||(i=a[e+"ScrollbarIndicatorSize"]+n.round(3*o),8>i&&(i=8),a[e+"ScrollbarIndicator"].style["h"==e?"width":"height"]=i+"px"),o=0):o>a[e+"ScrollbarMaxScroll"]&&(a.options.fixedScrollbar?o=a[e+"ScrollbarMaxScroll"]:(i=a[e+"ScrollbarIndicatorSize"]-n.round(3*(o-a[e+"ScrollbarMaxScroll"])),8>i&&(i=8),a[e+"ScrollbarIndicator"].style["h"==e?"width":"height"]=i+"px",o=a[e+"ScrollbarMaxScroll"]+(a[e+"ScrollbarIndicatorSize"]-i))),a[e+"ScrollbarWrapper"].style[h]="0",a[e+"ScrollbarWrapper"].style.opacity=t&&a.options.hideScrollbar?"0":"1",a[e+"ScrollbarIndicator"].style[s]="translate("+("h"==e?o+"px,0)":"0,"+o+"px)")+I)},_start:function(e){var t,i,a,o,r,l=this,c=v?e.touches[0]:e;l.enabled&&(l.options.onBeforeScrollStart&&l.options.onBeforeScrollStart.call(l,e),(l.options.useTransition||l.options.zoom)&&l._transitionTime(0),l.moved=!1,l.animating=!1,l.zoomed=!1,l.distX=0,l.distY=0,l.absDistX=0,l.absDistY=0,l.dirX=0,l.dirY=0,l.options.zoom&&v&&e.touches.length>1&&(o=n.abs(e.touches[0].pageX-e.touches[1].pageX),r=n.abs(e.touches[0].pageY-e.touches[1].pageY),l.touchesDistStart=n.sqrt(o*o+r*r),l.originX=n.abs(e.touches[0].pageX+e.touches[1].pageX-2*l.wrapperOffsetLeft)/2-l.x,l.originY=n.abs(e.touches[0].pageY+e.touches[1].pageY-2*l.wrapperOffsetTop)/2-l.y,l.options.onZoomStart&&l.options.onZoomStart.call(l,e)),l.options.momentum&&(l.options.useTransform?(t=getComputedStyle(l.scroller,null)[s].replace(/[^0-9\-.,]/g,"").split(","),i=1*t[4],a=1*t[5]):(i=1*getComputedStyle(l.scroller,null).left.replace(/[^0-9-]/g,""),a=1*getComputedStyle(l.scroller,null).top.replace(/[^0-9-]/g,"")),(i!=l.x||a!=l.y)&&(l.options.useTransition?l._unbind(S):E(l.aniTime),l.steps=[],l._pos(i,a))),l.absStartX=l.x,l.absStartY=l.y,l.startX=l.x,l.startY=l.y,l.pointX=c.pageX,l.pointY=c.pageY,l.startTime=e.timeStamp||Date.now(),l.options.onScrollStart&&l.options.onScrollStart.call(l,e),l._bind(x),l._bind(C),l._bind(k))},_move:function(e){var t,i,a,o=this,r=v?e.touches[0]:e,l=r.pageX-o.pointX,c=r.pageY-o.pointY,u=o.x+l,d=o.y+c,h=e.timeStamp||Date.now();return o.options.onBeforeScrollMove&&o.options.onBeforeScrollMove.call(o,e),o.options.zoom&&v&&e.touches.length>1?(t=n.abs(e.touches[0].pageX-e.touches[1].pageX),i=n.abs(e.touches[0].pageY-e.touches[1].pageY),o.touchesDist=n.sqrt(t*t+i*i),o.zoomed=!0,a=1/o.touchesDistStart*o.touchesDist*this.scale,o.options.zoomMin>a?a=.5*o.options.zoomMin*Math.pow(2,a/o.options.zoomMin):a>o.options.zoomMax&&(a=2*o.options.zoomMax*Math.pow(.5,o.options.zoomMax/a)),o.lastScale=a/this.scale,u=this.originX-this.originX*o.lastScale+this.x,d=this.originY-this.originY*o.lastScale+this.y,this.scroller.style[s]="translate("+u+"px,"+d+"px) scale("+a+")"+I,o.options.onZoom&&o.options.onZoom.call(o,e),void 0):(o.pointX=r.pageX,o.pointY=r.pageY,(u>0||o.maxScrollX>u)&&(u=o.options.bounce?o.x+l/2:u>=0||o.maxScrollX>=0?0:o.maxScrollX),(d>o.minScrollY||o.maxScrollY>d)&&(d=o.options.bounce?o.y+c/2:d>=o.minScrollY||o.maxScrollY>=0?o.minScrollY:o.maxScrollY),o.distX+=l,o.distY+=c,o.absDistX=n.abs(o.distX),o.absDistY=n.abs(o.distY),6>o.absDistX&&6>o.absDistY||(o.options.lockDirection&&(o.absDistX>o.absDistY+5?(d=o.y,c=0):o.absDistY>o.absDistX+5&&(u=o.x,l=0)),o.moved=!0,o._pos(u,d),o.dirX=l>0?-1:0>l?1:0,o.dirY=c>0?-1:0>c?1:0,h-o.startTime>300&&(o.startTime=h,o.startX=o.x,o.startY=o.y),o.options.onScrollMove&&o.options.onScrollMove.call(o,e)),void 0)},_end:function(e){if(!v||0===e.touches.length){var i,a,o,r,l,u,d,h=this,p=v?e.changedTouches[0]:e,f={dist:0,time:0},m={dist:0,time:0},g=(e.timeStamp||Date.now())-h.startTime,y=h.x,b=h.y;if(h._unbind(x),h._unbind(C),h._unbind(k),h.options.onBeforeScrollEnd&&h.options.onBeforeScrollEnd.call(h,e),h.zoomed)return d=h.scale*h.lastScale,d=Math.max(h.options.zoomMin,d),d=Math.min(h.options.zoomMax,d),h.lastScale=d/h.scale,h.scale=d,h.x=h.originX-h.originX*h.lastScale+h.x,h.y=h.originY-h.originY*h.lastScale+h.y,h.scroller.style[c]="200ms",h.scroller.style[s]="translate("+h.x+"px,"+h.y+"px) scale("+h.scale+")"+I,h.zoomed=!1,h.refresh(),h.options.onZoomEnd&&h.options.onZoomEnd.call(h,e),void 0;if(!h.moved)return v&&(h.doubleTapTimer&&h.options.zoom?(clearTimeout(h.doubleTapTimer),h.doubleTapTimer=null,h.options.onZoomStart&&h.options.onZoomStart.call(h,e),h.zoom(h.pointX,h.pointY,1==h.scale?h.options.doubleTapZoom:1),h.options.onZoomEnd&&setTimeout(function(){h.options.onZoomEnd.call(h,e)},200)):this.options.handleClick&&(h.doubleTapTimer=setTimeout(function(){for(h.doubleTapTimer=null,i=p.target;1!=i.nodeType;)i=i.parentNode;"SELECT"!=i.tagName&&"INPUT"!=i.tagName&&"TEXTAREA"!=i.tagName&&(a=t.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!0,e.view,1,p.screenX,p.screenY,p.clientX,p.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),a._fake=!0,i.dispatchEvent(a))},h.options.zoom?250:0))),h._resetPos(200),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,e),void 0;if(300>g&&h.options.momentum&&(f=y?h._momentum(y-h.startX,g,-h.x,h.scrollerW-h.wrapperW+h.x,h.options.bounce?h.wrapperW:0):f,m=b?h._momentum(b-h.startY,g,-h.y,0>h.maxScrollY?h.scrollerH-h.wrapperH+h.y-h.minScrollY:0,h.options.bounce?h.wrapperH:0):m,y=h.x+f.dist,b=h.y+m.dist,(h.x>0&&y>0||h.x<h.maxScrollX&&h.maxScrollX>y)&&(f={dist:0,time:0}),(h.y>h.minScrollY&&b>h.minScrollY||h.y<h.maxScrollY&&h.maxScrollY>b)&&(m={dist:0,time:0})),f.dist||m.dist)return l=n.max(n.max(f.time,m.time),10),h.options.snap&&(o=y-h.absStartX,r=b-h.absStartY,n.abs(o)<h.options.snapThreshold&&n.abs(r)<h.options.snapThreshold?h.scrollTo(h.absStartX,h.absStartY,200):(u=h._snap(y,b),y=u.x,b=u.y,l=n.max(u.time,l))),h.scrollTo(n.round(y),n.round(b),l),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,e),void 0;if(h.options.snap)return o=y-h.absStartX,r=b-h.absStartY,n.abs(o)<h.options.snapThreshold&&n.abs(r)<h.options.snapThreshold?h.scrollTo(h.absStartX,h.absStartY,200):(u=h._snap(h.x,h.y),(u.x!=h.x||u.y!=h.y)&&h.scrollTo(u.x,u.y,u.time)),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,e),void 0;h._resetPos(200),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,e)}},_resetPos:function(e){var t=this,i=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,n=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;return i==t.x&&n==t.y?(t.moved&&(t.moved=!1,t.options.onScrollEnd&&t.options.onScrollEnd.call(t)),t.hScrollbar&&t.options.hideScrollbar&&("webkit"==o&&(t.hScrollbarWrapper.style[h]="300ms"),t.hScrollbarWrapper.style.opacity="0"),t.vScrollbar&&t.options.hideScrollbar&&("webkit"==o&&(t.vScrollbarWrapper.style[h]="300ms"),t.vScrollbarWrapper.style.opacity="0"),void 0):(t.scrollTo(i,n,e||0),void 0)},_wheel:function(e){var t,i,n,a,o,r=this;if("wheelDeltaX"in e)t=e.wheelDeltaX/12,i=e.wheelDeltaY/12;else if("wheelDelta"in e)t=i=e.wheelDelta/12;else{if(!("detail"in e))return;t=i=3*-e.detail}return"zoom"==r.options.wheelAction?(o=r.scale*Math.pow(2,1/3*(i?i/Math.abs(i):0)),r.options.zoomMin>o&&(o=r.options.zoomMin),o>r.options.zoomMax&&(o=r.options.zoomMax),o!=r.scale&&(!r.wheelZoomCount&&r.options.onZoomStart&&r.options.onZoomStart.call(r,e),r.wheelZoomCount++,r.zoom(e.pageX,e.pageY,o,400),setTimeout(function(){r.wheelZoomCount--,!r.wheelZoomCount&&r.options.onZoomEnd&&r.options.onZoomEnd.call(r,e)},400)),void 0):(n=r.x+t,a=r.y+i,n>0?n=0:r.maxScrollX>n&&(n=r.maxScrollX),a>r.minScrollY?a=r.minScrollY:r.maxScrollY>a&&(a=r.maxScrollY),0>r.maxScrollY&&r.scrollTo(n,a,0),void 0)},_mouseout:function(e){var t=e.relatedTarget;if(!t)return this._end(e),void 0;for(;t=t.parentNode;)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var t=this;e.target==t.scroller&&(t._unbind(S),t._startAni())},_startAni:function(){var e,t,i,a=this,o=a.x,r=a.y,s=Date.now();if(!a.animating){if(!a.steps.length)return a._resetPos(400),void 0;if(e=a.steps.shift(),e.x==o&&e.y==r&&(e.time=0),a.animating=!0,a.moved=!0,a.options.useTransition)return a._transitionTime(e.time),a._pos(e.x,e.y),a.animating=!1,e.time?a._bind(S):a._resetPos(0),void 0;i=function(){var l,c,u=Date.now();return u>=s+e.time?(a._pos(e.x,e.y),a.animating=!1,a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a),a._startAni(),void 0):(u=(u-s)/e.time-1,t=n.sqrt(1-u*u),l=(e.x-o)*t+o,c=(e.y-r)*t+r,a._pos(l,c),a.animating&&(a.aniTime=$(i)),void 0)},i()}},_transitionTime:function(e){e+="ms",this.scroller.style[c]=e,this.hScrollbar&&(this.hScrollbarIndicator.style[c]=e),this.vScrollbar&&(this.vScrollbarIndicator.style[c]=e)},_momentum:function(e,t,i,a,o){var r=6e-4,s=n.abs(e)/t,l=s*s/(2*r),c=0,u=0;return e>0&&l>i?(u=o/(6/(l/s*r)),i+=u,s=s*i/l,l=i):0>e&&l>a&&(u=o/(6/(l/s*r)),a+=u,s=s*a/l,l=a),l*=0>e?-1:1,c=s/r,{dist:l,time:n.round(c)}},_offset:function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return e!=this.wrapper&&(t*=this.scale,i*=this.scale),{left:t,top:i}},_snap:function(e,t){var i,a,o,r,s,l,c=this;for(o=c.pagesX.length-1,i=0,a=c.pagesX.length;a>i;i++)if(e>=c.pagesX[i]){o=i;break}for(o==c.currPageX&&o>0&&0>c.dirX&&o--,e=c.pagesX[o],s=n.abs(e-c.pagesX[c.currPageX]),s=s?500*(n.abs(c.x-e)/s):0,c.currPageX=o,o=c.pagesY.length-1,i=0;o>i;i++)if(t>=c.pagesY[i]){o=i;break}return o==c.currPageY&&o>0&&0>c.dirY&&o--,t=c.pagesY[o],l=n.abs(t-c.pagesY[c.currPageY]),l=l?500*(n.abs(c.y-t)/l):0,c.currPageY=o,r=n.round(n.max(s,l))||200,{x:e,y:t,time:r}},_bind:function(e,t,i){(t||this.scroller).addEventListener(e,this,!!i)},_unbind:function(e,t,i){(t||this.scroller).removeEventListener(e,this,!!i)},destroy:function(){var t=this;t.scroller.style[s]="",t.hScrollbar=!1,t.vScrollbar=!1,t._scrollbar("h"),t._scrollbar("v"),t._unbind(w,e),t._unbind(_),t._unbind(x),t._unbind(C),t._unbind(k),t.options.hasTouch||(t._unbind("mouseout",t.wrapper),t._unbind(T)),t.options.useTransition&&t._unbind(S),t.options.checkDOMChanges&&clearInterval(t.checkDOMTime),t.options.onDestroy&&t.options.onDestroy.call(t)},refresh:function(){var e,t,i,a,o=this,r=0,s=0;if(o.scale<o.options.zoomMin&&(o.scale=o.options.zoomMin),o.wrapperW=o.wrapper.clientWidth||1,o.wrapperH=o.wrapper.clientHeight||1,o.minScrollY=-o.options.topOffset||0,o.scrollerW=n.round(o.scroller.offsetWidth*o.scale),o.scrollerH=n.round((o.scroller.offsetHeight+o.minScrollY)*o.scale),o.maxScrollX=o.wrapperW-o.scrollerW,o.maxScrollY=o.wrapperH-o.scrollerH+o.minScrollY,o.dirX=0,o.dirY=0,o.options.onRefresh&&o.options.onRefresh.call(o),o.hScroll=o.options.hScroll&&0>o.maxScrollX,o.vScroll=o.options.vScroll&&(!o.options.bounceLock&&!o.hScroll||o.scrollerH>o.wrapperH),o.hScrollbar=o.hScroll&&o.options.hScrollbar,o.vScrollbar=o.vScroll&&o.options.vScrollbar&&o.scrollerH>o.wrapperH,e=o._offset(o.wrapper),o.wrapperOffsetLeft=-e.left,o.wrapperOffsetTop=-e.top,"string"==typeof o.options.snap)for(o.pagesX=[],o.pagesY=[],a=o.scroller.querySelectorAll(o.options.snap),t=0,i=a.length;i>t;t++)r=o._offset(a[t]),r.left+=o.wrapperOffsetLeft,r.top+=o.wrapperOffsetTop,o.pagesX[t]=r.left<o.maxScrollX?o.maxScrollX:r.left*o.scale,o.pagesY[t]=r.top<o.maxScrollY?o.maxScrollY:r.top*o.scale;else if(o.options.snap){for(o.pagesX=[];r>=o.maxScrollX;)o.pagesX[s]=r,r-=o.wrapperW,s++;for(o.maxScrollX%o.wrapperW&&(o.pagesX[o.pagesX.length]=o.maxScrollX-o.pagesX[o.pagesX.length-1]+o.pagesX[o.pagesX.length-1]),r=0,s=0,o.pagesY=[];r>=o.maxScrollY;)o.pagesY[s]=r,r-=o.wrapperH,s++;o.maxScrollY%o.wrapperH&&(o.pagesY[o.pagesY.length]=o.maxScrollY-o.pagesY[o.pagesY.length-1]+o.pagesY[o.pagesY.length-1])}o._scrollbar("h"),o._scrollbar("v"),o.zoomed||(o.scroller.style[c]="0",o._resetPos(200))},scrollTo:function(e,t,i,n){var a,o,r=this,s=e;for(r.stop(),s.length||(s=[{x:e,y:t,time:i,relative:n}]),a=0,o=s.length;o>a;a++)s[a].relative&&(s[a].x=r.x-s[a].x,s[a].y=r.y-s[a].y),r.steps.push({x:s[a].x,y:s[a].y,time:s[a].time||0});r._startAni()},scrollToElement:function(e,t){var i,a=this;e=e.nodeType?e:a.scroller.querySelector(e),e&&(i=a._offset(e),i.left+=a.wrapperOffsetLeft,i.top+=a.wrapperOffsetTop,i.left=i.left>0?0:i.left<a.maxScrollX?a.maxScrollX:i.left,i.top=i.top>a.minScrollY?a.minScrollY:i.top<a.maxScrollY?a.maxScrollY:i.top,t=void 0===t?n.max(2*n.abs(i.left),2*n.abs(i.top)):t,a.scrollTo(i.left,i.top,t))},scrollToPage:function(e,t,i){var n,a,o=this;i=void 0===i?400:i,o.options.onScrollStart&&o.options.onScrollStart.call(o),o.options.snap?(e="next"==e?o.currPageX+1:"prev"==e?o.currPageX-1:e,t="next"==t?o.currPageY+1:"prev"==t?o.currPageY-1:t,e=0>e?0:e>o.pagesX.length-1?o.pagesX.length-1:e,t=0>t?0:t>o.pagesY.length-1?o.pagesY.length-1:t,o.currPageX=e,o.currPageY=t,n=o.pagesX[e],a=o.pagesY[t]):(n=-o.wrapperW*e,a=-o.wrapperH*t,o.maxScrollX>n&&(n=o.maxScrollX),o.maxScrollY>a&&(a=o.maxScrollY)),o.scrollTo(n,a,i)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(x),this._unbind(C),this._unbind(k)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(S):E(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(e,t,i,n){var a=this,o=i/a.scale;a.options.useTransform&&(a.zoomed=!0,n=void 0===n?200:n,e=e-a.wrapperOffsetLeft-a.x,t=t-a.wrapperOffsetTop-a.y,a.x=e-e*o+a.x,a.y=t-t*o+a.y,a.scale=i,a.refresh(),a.x=a.x>0?0:a.x<a.maxScrollX?a.maxScrollX:a.x,a.y=a.y>a.minScrollY?a.minScrollY:a.y<a.maxScrollY?a.maxScrollY:a.y,a.scroller.style[c]=n+"ms",a.scroller.style[s]="translate("+a.x+"px,"+a.y+"px) scale("+i+")"+I,a.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},a=null,"undefined"!=typeof exports?exports.iScroll=D:e.iScroll=D})(window,document);